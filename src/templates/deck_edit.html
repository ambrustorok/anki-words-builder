{% extends "base.html" %}

{% block content %}
<article class="rounded-3xl border border-slate-200/80 bg-white p-6 shadow-xl shadow-slate-200/60 dark:border-white/10 dark:bg-slate-900/60 dark:shadow-black/30">
    <h2 class="text-2xl font-semibold text-slate-900 dark:text-white">Edit deck</h2>
    <p class="mt-1 text-sm text-slate-500 dark:text-slate-400">Tune the schema and prompts to reflect how you want flashcards rendered.</p>

    <form method="post" action="/decks/{{ deck.id }}/edit" class="mt-6 space-y-4">
        <label class="block text-sm font-medium text-slate-900 dark:text-white">
            Deck name
            <input type="text" name="name" value="{{ deck.name }}" required class="mt-2 w-full rounded-2xl border border-slate-200/80 bg-white px-4 py-3 text-slate-900 dark:border-white/10 dark:bg-slate-950/60 dark:text-white">
        </label>
        <label class="block text-sm font-medium text-slate-900 dark:text-white">
            Target language
            <select name="target_language" required class="mt-2 w-full rounded-2xl border border-slate-200/80 bg-white px-4 py-3 text-slate-900 dark:border-white/10 dark:bg-slate-950/60 dark:text-white">
                {% for lang in target_languages %}
                    <option value="{{ lang }}" {% if deck.target_language == lang %}selected{% endif %}>{{ lang }}</option>
                {% endfor %}
            </select>
        </label>
        <label class="block text-sm font-medium text-slate-900 dark:text-white">
            Field schema (JSON)
            <textarea name="field_schema_json" rows="8" class="mt-2 w-full rounded-2xl border border-slate-200/80 bg-white px-4 py-3 text-sm text-slate-900 dark:border-white/10 dark:bg-slate-950/60 dark:text-white">{{ deck.field_schema | tojson(indent=2) }}</textarea>
        </label>
        <fieldset class="rounded-2xl border border-slate-200/80 bg-slate-50 p-4 dark:border-white/10 dark:bg-black/20">
            <legend class="px-2 text-sm font-semibold text-slate-900 dark:text-white">Generation prompts</legend>
            <div class="mt-4 grid gap-4 lg:grid-cols-2">
                <label class="block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">
                    Translation – system
                    <textarea name="translation_system" rows="2" class="mt-2 w-full rounded-2xl border border-slate-200/80 bg-white px-3 py-2 text-sm text-slate-900 dark:border-white/10 dark:bg-slate-950/60 dark:text-white">{{ generation_prompts.translation.system }}</textarea>
                </label>
                <label class="block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">
                    Translation – user
                    <textarea name="translation_user" rows="3" class="mt-2 w-full rounded-2xl border border-slate-200/80 bg-white px-3 py-2 text-sm text-slate-900 dark:border-white/10 dark:bg-slate-950/60 dark:text-white">{{ generation_prompts.translation.user }}</textarea>
                </label>
                <label class="block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">
                    Dictionary – system
                    <textarea name="dictionary_system" rows="2" class="mt-2 w-full rounded-2xl border border-slate-200/80 bg-white px-3 py-2 text-sm text-slate-900 dark:border-white/10 dark:bg-slate-950/60 dark:text-white">{{ generation_prompts.dictionary.system }}</textarea>
                </label>
                <label class="block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">
                    Dictionary – user
                    <textarea name="dictionary_user" rows="3" class="mt-2 w-full rounded-2xl border border-slate-200/80 bg-white px-3 py-2 text-sm text-slate-900 dark:border-white/10 dark:bg-slate-950/60 dark:text-white">{{ generation_prompts.dictionary.user }}</textarea>
                </label>
                <label class="block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">
                    Example sentence – system
                    <textarea name="sentence_system" rows="2" class="mt-2 w-full rounded-2xl border border-slate-200/80 bg-white px-3 py-2 text-sm text-slate-900 dark:border-white/10 dark:bg-slate-950/60 dark:text-white">{{ generation_prompts.sentence.system }}</textarea>
                </label>
                <label class="block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">
                    Example sentence – user
                    <textarea name="sentence_user" rows="3" class="mt-2 w-full rounded-2xl border border-slate-200/80 bg-white px-3 py-2 text-sm text-slate-900 dark:border-white/10 dark:bg-slate-950/60 dark:text-white">{{ generation_prompts.sentence.user }}</textarea>
                </label>
            </div>
        </fieldset>
        <button type="submit" class="inline-flex items-center rounded-full bg-brand px-6 py-3 text-base font-semibold text-slate-900 transition hover:bg-sky-200">Save deck</button>
    </form>
</article>
{% endblock %}
